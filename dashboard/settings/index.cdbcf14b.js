var e={buildButton:function(e,n,d){const t=document.createElement("button");return d&&d.length>0&&t.classList.add(...d),t.name=e,t.innerText=n,t},buildLabel:function(e,n,d){const t=document.createElement("label");return d&&d.length>0&&t.classList.add(...d),t.htmlFor=e,t.innerText=n,t},buildTextInput:function(e,n,d){const t=document.createElement("input");return d&&d.length>0&&t.classList.add(...d),t.type="text",t.name=e,t.value=n,t},buildSelect:function(e,n,d){const t=document.createElement("select");return e&&e.length>0&&t.classList.add(...e),t.name=n,d.forEach((e=>{const n=document.createElement("option");n.value=e.value,n.innerText=e.label,n.selected=e.selected,t.add(n)})),t},buildHiddenInput:function(e,n){const d=document.createElement("input");return d.type="hidden",d.name=e,d.value=n,d},buildSpan:function(e,n){const d=document.createElement("span");return n&&n.length>0&&d.classList.add(...n),d.innerText=e,d},buildDiv:function(e,n){const d=document.createElement("div");return n&&n.length>0&&d.classList.add(...n),e&&(d.id=e),d},buildNumberInput:function(e,n,d){const t=document.createElement("input");return d&&d.length>0&&t.classList.add(...d),t.type="number",t.name=e,t.value=n,t},buildForm:function(e,n,d){const t=document.createElement("form");return e&&(t.name=e),n&&(t.id=n),d&&d.length>0&&t.classList.add(...d),t}};let n;var d;let t;(d=n||(n={})).soundCueConfig="soundCueConfig",d.soundCuesEnabled="soundCuesEnabled",d.soundCueList="soundCueList",d.soundCueLog="soundCueLog",d.soundCueTypes="soundCueTypes",d.nodeCGServerSoundCues="soundCues",(t||(t={})).change="change";var o=t;let a;var l;let i;(l=a||(a={})).commandFormRow="commandFormRow",l.btnRemove="btnRemove",l.btnAdd="btnAdd",l.formGroup="formGroup",l.middle="middle",l.btnToggleEnabled="btnToggleEnabled",l.enabled="enabled",l.readOnly="readOnly",l.hidden="hidden",l.cueSelectWrapper="cueSelectWrapper",(i||(i={})).cueConfigPanel="cueConfigPanel";const u=nodecg.Replicant(n.soundCueConfig),c=nodecg.Replicant(n.soundCueTypes),r=nodecg.Replicant(n.soundCueList);function m(e){if(e.preventDefault(),!u||!u.value)return void console.error("Failed enabling/disabling sound alert - replicant not available.");if(!e.target)return void console.error("Failed enabling/disabling sound alert - no event target found.");const n=e.target;if(!n.dataset.cmdName)return void console.error("Failed enabling/disabling sound alert - command name found.");const d=n.dataset.cmdName,t=u.value.find((e=>e.commandName===d));if(!t)return void console.error(`Failed enabling/disabling sound alert - command found for "${d}" not found.`);const o="true"===n.dataset.enabled;t.enabled=!o}function s(n){let d=[a.formGroup];n&&(d=d.concat(n));return e.buildDiv(void 0,d)}function p(n,d){if(!c||!c.value)throw Error("Unable to map command rows - no command types are loaded.");if(!r||!r.value)throw Error("Unable to map command rows - no sound cues are loaded.");const t=[a.commandFormRow],o=e.buildForm("commandForm[]",null,[]),l=e.buildDiv(`cmd-row-${n.commandName}`,t);l.dataset.commandName=n.commandName;let i=s([a.middle]),u=function(n,d){let t=n?"On":"Off";const o=e.buildButton("btnEnabled",t,[a.btnToggleEnabled]);return n&&o.classList.add(a.enabled),o.onclick=m,o.dataset.cmdName=d,o.dataset.enabled=n.toString(),o}(n.enabled,n.commandName);i.appendChild(u),l.appendChild(i);const p=[a.hidden];i=s();let b=e.buildLabel("commandName","Name"),g=e.buildTextInput("commandName",n.commandName,p),C=e.buildSpan(n.commandName);i.append(b,g,C),l.appendChild(i),i=s(),b=e.buildLabel("coolDownMs","Cooldown");let f=n.coolDownMs?n.coolDownMs.toString():"0",h=n.coolDownMs?`${n.coolDownMs} ms`:"None";g=e.buildNumberInput("coolDownMs",f,p),C=e.buildSpan(h),i.append(b,g,C),l.appendChild(i);const v=c.value.map((e=>({label:e,value:e,selected:n.commandType===e})));i=s(),b=e.buildLabel("commandType","Type");let E=e.buildSelect(p,"commandType",v);C=e.buildSpan(n.commandType),i.append(b,E,C),l.appendChild(i),i=s(),b=e.buildLabel("mappedCues","Cues"),i.append(b);const L=n.mappedCues.length>0,S=[];if(S.push({label:"Select one",value:"-1",selected:!L}),0===n.mappedCues.length){C=e.buildSpan("None");const n=e.buildDiv(void 0,[a.cueSelectWrapper]),d=S.map((e=>({...e})));E=e.buildSelect(p,"mappedCues[]",d),n.appendChild(E),i.appendChild(n)}else{C=e.buildSpan(n.mappedCues.join(", "));for(let d=0;d<n.mappedCues.length;d++){const t=e.buildDiv(void 0,[a.cueSelectWrapper]),o=n.mappedCues[d],l=S.map((e=>({...e,selected:o===e.value})));E=e.buildSelect(p,"mappedCues[]",l),i.appendChild(E),d>0&&(u=e.buildButton("","-",[a.btnRemove,a.hidden]),t.appendChild(u)),i.appendChild(t)}}return i.appendChild(C),u=e.buildButton("","+",[a.btnAdd,a.hidden]),i.appendChild(u),l.appendChild(i),i=s([a.middle,a.hidden]),u=e.buildButton("","Save",[a.btnAdd]),i.appendChild(u),l.appendChild(i),i=s([a.middle]),u=e.buildButton("","Edit",[]),i.appendChild(u),l.appendChild(i),o.appendChild(l),o}function b(e,n){Array.isArray(e)?e&&!n?function(e){const n=document.getElementById(i.cueConfigPanel);if(!n)return void console.error("Unable to locate panel, skipping form initialization.");const d=e.map(p);n.append(...d)}(e):e&&n?document.getElementById(i.cueConfigPanel)||console.error("Unable to locate panel, skipping form update."):!e&&n&&(document.getElementById(i.cueConfigPanel)||console.error("Unable to locate panel, skipping form teardown.")):console.error("No config was provided, skipping form render.")}document.addEventListener("DOMContentLoaded",(function(){NodeCG.waitForReplicants(u,c,r).then((()=>{u.on(o.change,b)}))}));
//# sourceMappingURL=index.cdbcf14b.js.map
